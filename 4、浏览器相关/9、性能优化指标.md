# 核心指标以及提升方式
> 核心指标： LCP、FID、CLS
## 渲染相关指标
### 最大屏幕渲染时间(LCP/Largest ContentFul Paint)
> 根据页面开始加载的时间报告可视区域内可见的最大图像或文本块完成渲染的计算时间，用于测验加载性能，衡量网站初次载入速度。 我们应该控制该值在2.5 秒以内
### 首屏渲染时间（First Contentful Paint/FCP）
> 首先区别一下首屏渲染时间与白屏渲染时间：
> 
> 白屏时间是指浏览器从响应用户输入网址地址，到浏览器开始显示内容的时间。
> 
> 首屏时间是指浏览器从响应用户输入网址地址，到首屏内容渲染完成的时间，此时整个网页不一定要全部渲染完成，但在当前视窗的内容需要。
> 
> 白屏时间是首屏时间的一个子集。

- 时间截止至页面第一次加载内容（加载空标签不算）

**正常来说，首屏加载时间不应该超过2s~3s。**

**如果一个页面完成首屏加载需要5秒以上，可能用户下次就从心理排斥打开这个页面，首屏加载时间对用户留存率影响很大。**

## 交互相关指标
### FID(First Input Delay)
> FID 测量从用户第一次与页面交互（例如当他们单击链接、点按按钮或使用由 JavaScript 驱动的自定义控件）直到浏览器对交互作出响应，并实际能够开始处理事件处理程序所经过的时间。

### CLS()
概念：累积布局偏移，测量视觉稳定性。

需要注意的是，布局偏移只发生在已经存在的元素改变起始位置的时候。如果一个新的元素被添加到dom上，或者已存在的元素改变它的尺寸，除非改变了其他元素的起始位置，否则都不算布局偏移。

其 CLS 代表的是每个元素非预期位移的累积，而每个位移的算法如下: 元素位移分数 (Layout Shift Score) = 影响范围 (Impact Fraction) * 移动距离 (Distance Fraction)。
#### 优化方案
1. cdn分发
2. 后端在业务层进行缓存。（数据库查询缓存）
3. 静态文件缓存。（强缓存、协商缓存）
4. 前端资源懒加载
   1. 路由懒加载（动态路由）
   2. 组件懒加载（不在当前视窗的组件先不加载）
   3. 图片懒加载
5. 合并请求。（http1.1效果比较大。http2.0有多路复用，）
6. 使用骨架屏。这不会减少首屏加载时间，但是会减少用户等待的急躁情绪。
7. 使用SSR，服务端渲染。（具体可看 https://ssr.vuejs.org/zh/#%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%B8%B2%E6%9F%93-ssr-%EF%BC%9F）
8. 使用http2.0。提升传输性能。
9. 压缩文件。（图片：雪碧图。压缩css、js文件）
10. 使用script的async和defer属性。首屏不要求马上执行的js文件可以考虑这两个属性。


### 每秒帧率（FPS）
用简单的计算来说明：
>当画面的分辨率是1024×768时，画面的刷新率要达到24帧/秒，那么显卡在一秒钟内需要处理的像素量就达到了“1024×768×24=18874368”。

>在游戏过程中一般人能接受的最低FPS约为30Hz，基本流畅等级则需要>60Hz。

## 用Chrome监控网页性能
### Lighthouse
Chrome浏览器自带的网页性能检测工具，数据包括：
首屏渲染时间（FCP）、可交互时间（TTI）、首屏展示平均值（speed Index）等。

### Performance Monitor 性能指标
打开方式
- 打开浏览器, 输入需要监视的网址
- 按F12打开Chrome控制台
- 按组合键Ctrl+P(windows, mac快捷键为command + p)
- 输入> Show Performance Monitor, 打开性能监视器

主要包括几个指标
1. CPU usage, CPU占用率
1. JS head size, JS内存使用大小
1. DOM Nodes, 内存中挂载的DOM节点个数
1. JS event listeners, 事件监听数
1. Document
1. Document Frames
1. Layouts / sec, 布局重排, 浏览器用来计算页面上所有元素的位置和大小的过程
1. Style recalcs / sec, 页面样式重绘

### 关于查看重绘
在More tools 选中Rendering=> Paint Flashing，绿色的既是重绘的部分
