**一、从源码转换讲起**
JavaScript脚本正变得越来越复杂。大部分源码（尤其是各种函数库和框架）都要经过转换，才能投入生产环境。
常见的源码转换，主要是以下三种情况：
（1）压缩，减小体积。比如jQuery 1.9的源码，压缩前是252KB，压缩后是32KB。
（2）多个文件合并，减少HTTP请求数。
（3）其他语言编译成JavaScript。最常见的例子就是CoffeeScript。
这三种情况，都使得实际运行的代码不同于开发代码，除错（debug）变得困难重重。
通常，JavaScript的解释器会告诉你，第几行第几列代码出错。但是，这对于转换后的代码毫无用处。举例来说，jQuery 1.9压缩后只有3行，每行3万个字符，所有内部变量都改了名字。你看着报错信息，感到毫无头绪，根本不知道它所对应的原始位置。
这就是Source map想要解决的问题。
**二、什么是Source map**
Source map就是一个信息文件，里面储存着位置信息。也就是说，转换后的代码的每一个位置，所对应的转换前的位置。
有了它，出错的时候，除错工具将直接显示原始代码，而不是转换后的代码。这无疑给开发者带来了很大方便。
**三、如何启用Source map**
**四、如何生成Source map**
**五、Source map的格式**

打开Source map文件，它大概是这个样子：

> 　　{  
> 　　　　version : 3,  
> 　　　　file: "out.js",  
> 　　　　sourceRoot : "",  
> 　　　　sources: ["foo.js", "bar.js"],  
> 　　　　names: ["src", "maps", "are", "fun"],  
> 　　　　mappings: "AAgBC,SAAQ,CAAEA"  
> 　　}

整个文件就是一个JavaScript对象，可以被解释器读取。它主要有以下几个属性：

> 　　- version：Source map的版本，目前为3。
> 　　- file：转换后的文件名。
> 　　- sourceRoot：转换前的文件所在的目录。如果与转换前的文件在同一目录，该项为空。
> 　　- sources：转换前的文件。该项是一个数组，表示可能存在多个文件合并。
> 　　- names：转换前的所有变量名和属性名。
> 　　- mappings：记录位置信息的字符串，下文详细介绍。

**六、mappings属性**
两个文件的各个位置是如何一一对应的。
关键就是map文件的mappings属性。这是一个很长的字符串，它分成三层。
> 　　第一层是**行对应**，以分号（;）表示，每个分号对应转换后源码的一行。所以，第一个分号前的内容，就对应源码的第一行，以此类推。
> 　　第二层是**位置对应**，以逗号（,）表示，每个逗号对应转换后源码的一个位置。所以，第一个逗号前的内容，就对应该行源码的第一个位置，以此类推。
> 　　第三层是**位置转换**，以[VLQ编码](https://en.wikipedia.org/wiki/Variable-length_quantity)表示，代表该位置对应的转换前的源码位置。

举例来说，假定mappings属性的内容如下：

> 　　mappings:"AAAAA,BBBBB;CCCCC"

就表示，转换后的源码分成两行，第一行有两个位置，第二行有一个位置。
**七、位置对应的原理**