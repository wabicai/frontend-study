# 核心点

1. 文件切片

   > 文件 File 对象是 Blob 对象的子类，Blob 对象包含一个重要的方法 slice，通过这个方法，我们就可以对二进制文件进行拆分。

2. 使用 worker 计算文件切片 hash 值, 通过 postMessage 向主线程发送 hash 值

   1. 这里也可以 React 的 Fiber，通过`requestIdleCallback`利用浏览器的空闲时间
   2. 可以抽样 hash

3. 文件合并（三种方案）
   1. 前端发送完切片，发送合并请求，后端再合并。
   2. 后端纪律切片数据，自动完成合并
   3. 创建源文件大小相同文件，根据切片起始位置直接将切片写入对应位置。

# 暂停上传

1. 维护一个请求列表，存放未收到响应的请求，暂停时调用`xhr`对象的 `abort`方法。

# 考虑浏览器的上传上限

1. 断点上传使用并发模式，如果一次几百个 HTTP 请求，浏览器撑不住，则需要放入异步请求队列
